{% extends 'diagnosis/base.html' %}

{%block title%}
<title>Login</title>
{%endblock%}
{%block navbar%}
{%endblock%}
{%block content%}
 <div class="card mx-auto mt-5 bg-light shadow-lg" style="width: 300px;">
        <h4 class="card-header">Авторизация</h4>
 
        <form method="post" action="{% url 'login' %}" class="card-body">
            {% csrf_token %}
            <div class="form-group input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroup-sizing-sm">
                        <img src="https://img.icons8.com/material/24/000000/gender-neutral-user.png" alt="Login">
                    </span>
                </div>
                <input class="form-control" type="text" name='{{form.username.html_name}}' autofocus required id="id_username" placeholder="Логин" aria-describedby="basic-addon1" id="username" >
            </div>

            <div class="form-group input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroup-sizing-sm">
                        <img src="https://img.icons8.com/material/24/000000/password.png" alt="Password">
                    </span>
                </div>
                <input class="form-control" type="password"  name="{{ form.password.html_name }}" required placeholder="Пароль" aria-describedby="basic-addon1"
                    id="password">
                     {% if form.errors %}
                         <div class="text-danger">Неверный логин или пароль.</div> 
                     {% endif %}
                     {% if next %}
                         {% if user.is_authenticated %}
                             <div class="text-danger"> У вашего аккаунта нет доступа к этой странице. Чтобы продолжить, войдите с аккаунта у которого есть необходимые разрешения</div>
                         {% else %}
                             <div class="text-danger">Войдите, чтобы увидеть эту страницу</div>
                         {% endif %}
                     {% endif %}
            </div>

            <div class="ml-auto col-4">
                <input type="submit" value="Войти" class="btn btn-success">
                <input type="hidden" name="next" value="{{ next }}" />
            </div>
        </form>
    </div>
{%endblock%}